# ğŸ“ AI Math Tutor - æ™ºèƒ½æ•°å­¦è¾…å¯¼ç³»ç»Ÿ

> è®©æ•°å­¦å˜å¾—ç®€å•åˆæœ‰è¶£ â€”â€” é€šè¿‡å¯è§†åŒ–åŠ¨ç”»ä¸€æ­¥æ­¥æ•™å­¦ç”Ÿè§£é¢˜

## ğŸŒŸ é¡¹ç›®ç®€ä»‹

è¿™æ˜¯ä¸€ä¸ªåŸºäº **AI + Manim** çš„æ•°å­¦è¾…å¯¼ç³»ç»Ÿï¼Œèƒ½å¤Ÿè‡ªåŠ¨ç”Ÿæˆæ•°å­¦é—®é¢˜çš„åŠ¨ç”»è§£é¢˜è§†é¢‘ã€‚ç³»ç»Ÿæ”¯æŒä»å°å­¦åˆ°å¤§å­¦çš„å¤šä¸ªå¹´çº§ï¼Œé‡‡ç”¨"å›¾å½¢ä¼˜å…ˆ"çš„æ•™å­¦ç†å¿µï¼Œè®©å­¦ç”Ÿé€šè¿‡å¯è§†åŒ–åŠ¨ç”»ç†è§£æ•°å­¦åŸç†ã€‚

### æ ¸å¿ƒç‰¹ç‚¹

- ğŸ¬ **åŠ¨ç”»ç”Ÿæˆ** - è‡ªåŠ¨ç”Ÿæˆ Manim æ•°å­¦åŠ¨ç”»è§†é¢‘
- ğŸ§  **å¤šå¹´çº§æ”¯æŒ** - å°å­¦ã€åˆä¸­ã€é«˜ä¸­ã€å¤§å­¦ä¸åŒæ€ç»´æ–¹å¼
- ğŸ“š **æŠ€èƒ½ç³»ç»Ÿ** - 24+ å¯è§†åŒ–æŠ€èƒ½æ¨¡æ¿ï¼ˆé¸¡å…”åŒç¬¼ã€æé™ã€äºŒæ¬¡å‡½æ•°ç­‰ï¼‰
- ğŸ”„ **è‡ªåŠ¨ä¿®å¤** - LangGraph å·¥ä½œæµ + è°ƒè¯•èŠ‚ç‚¹è‡ªåŠ¨ä¿®å¤é”™è¯¯

---

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Frontend (React)                          â”‚
â”‚  App.tsx â†’ GradeSelector â†’ ProblemInput â†’ ResultDisplay          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚ HTTP API
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Backend (FastAPI)                            â”‚
â”‚  api/main.py â†’ routes/problems.py â†’ LangGraphEngine              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   LangGraph Workflow                             â”‚
â”‚                                                                  â”‚
â”‚  classify â†’ understand â†’ solve â†’ validate â†’ visualize â†’ execute â”‚
â”‚     â”‚                              â”‚            â”‚          â”‚     â”‚
â”‚     â””â”€â”€ ç®€å•é¢˜è·³è¿‡ understand      â”‚            â”‚          â”‚     â”‚
â”‚                                    â”‚            â”‚          â”‚     â”‚
â”‚                                    â””â”€â”€ éªŒè¯å¤±è´¥é‡è¯•         â”‚     â”‚
â”‚                                                 â”‚          â”‚     â”‚
â”‚                                                 â””â”€â”€ æ‰§è¡Œå¤±è´¥ â”‚     â”‚
â”‚                                                       â†“          â”‚
â”‚                                                 debug_node       â”‚
â”‚                                                   â†“ 3æ¬¡å¤±è´¥      â”‚
â”‚                                                 fallback         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Skills System                                â”‚
â”‚  skills/definitions/visualization/*.md (24ä¸ªæŠ€èƒ½æ¨¡æ¿)            â”‚
â”‚  - æ¨¡æ¿ä¼˜å…ˆç­–ç•¥ï¼šåŒ¹é…æŠ€èƒ½åç›´æ¥ä½¿ç”¨æ¨¡æ¿ä»£ç                         â”‚
â”‚  - è¯­æ³•éªŒè¯ï¼šæ‰§è¡Œå‰æ£€æŸ¥ä»£ç æ­£ç¡®æ€§                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ ç›®å½•ç»“æ„

```
math-learning-tool-1/
â”œâ”€â”€ backend/                          # FastAPI åç«¯
â”‚   â””â”€â”€ src/math_tutor/
â”‚       â”œâ”€â”€ api/                      # REST API å±‚
â”‚       â”‚   â”œâ”€â”€ main.py              # FastAPI åº”ç”¨å…¥å£
â”‚       â”‚   â””â”€â”€ routes/              # è·¯ç”±å¤„ç†
â”‚       â”‚       â”œâ”€â”€ problems.py      # é—®é¢˜å¤„ç†æ¥å£
â”‚       â”‚       â”œâ”€â”€ grades.py        # å¹´çº§æ¥å£
â”‚       â”‚       â””â”€â”€ videos.py        # è§†é¢‘æœåŠ¡
â”‚       â”‚
â”‚       â”œâ”€â”€ application/             # åº”ç”¨å±‚ï¼ˆç”¨ä¾‹ï¼‰
â”‚       â”‚   â”œâ”€â”€ interfaces.py        # æ¥å£å®šä¹‰
â”‚       â”‚   â””â”€â”€ use_cases/           # ä¸šåŠ¡ç”¨ä¾‹
â”‚       â”‚
â”‚       â”œâ”€â”€ domain/                  # é¢†åŸŸå±‚ï¼ˆæ ¸å¿ƒä¸šåŠ¡ï¼‰
â”‚       â”‚   â”œâ”€â”€ entities/            # å®ä½“
â”‚       â”‚   â””â”€â”€ value_objects/       # å€¼å¯¹è±¡ï¼ˆGradeç­‰ï¼‰
â”‚       â”‚
â”‚       â”œâ”€â”€ infrastructure/          # åŸºç¡€è®¾æ–½å±‚
â”‚       â”‚   â”œâ”€â”€ agents/              # LangGraph Agent ç³»ç»Ÿ
â”‚       â”‚   â”‚   â”œâ”€â”€ langgraph_engine.py  # å·¥ä½œæµå¼•æ“
â”‚       â”‚   â”‚   â””â”€â”€ nodes/           # å·¥ä½œæµèŠ‚ç‚¹
â”‚       â”‚   â”‚       â”œâ”€â”€ classifier.py    # åˆ†ç±»èŠ‚ç‚¹
â”‚       â”‚   â”‚       â”œâ”€â”€ understanding.py # ç†è§£èŠ‚ç‚¹
â”‚       â”‚   â”‚       â”œâ”€â”€ solving.py       # è§£é¢˜èŠ‚ç‚¹
â”‚       â”‚   â”‚       â”œâ”€â”€ validator.py     # éªŒè¯èŠ‚ç‚¹
â”‚       â”‚   â”‚       â”œâ”€â”€ visualize.py     # å¯è§†åŒ–èŠ‚ç‚¹ï¼ˆæ ¸å¿ƒï¼‰
â”‚       â”‚   â”‚       â”œâ”€â”€ execute.py       # æ‰§è¡ŒèŠ‚ç‚¹
â”‚       â”‚   â”‚       â”œâ”€â”€ debug.py         # è°ƒè¯•èŠ‚ç‚¹
â”‚       â”‚   â”‚       â””â”€â”€ fallback.py      # é™çº§èŠ‚ç‚¹
â”‚       â”‚   â”‚
â”‚       â”‚   â”œâ”€â”€ skills/              # æŠ€èƒ½ç³»ç»Ÿ
â”‚       â”‚   â”‚   â”œâ”€â”€ file_repository.py   # æŠ€èƒ½ä»“åº“
â”‚       â”‚   â”‚   â””â”€â”€ definitions/
â”‚       â”‚   â”‚       â””â”€â”€ visualization/   # 24ä¸ªå¯è§†åŒ–æŠ€èƒ½
â”‚       â”‚   â”‚           â”œâ”€â”€ chicken_rabbit.md  # é¸¡å…”åŒç¬¼
â”‚       â”‚   â”‚           â”œâ”€â”€ limit_sinx_x.md    # æé™
â”‚       â”‚   â”‚           â”œâ”€â”€ quadratic_function.md # äºŒæ¬¡å‡½æ•°
â”‚       â”‚   â”‚           â””â”€â”€ ...
â”‚       â”‚   â”‚
â”‚       â”‚   â”œâ”€â”€ manim/               # Manim æ‰§è¡Œå™¨
â”‚       â”‚   â”‚   â””â”€â”€ executor.py
â”‚       â”‚   â”‚
â”‚       â”‚   â””â”€â”€ llm/                 # LLM å·¥å‚
â”‚       â”‚       â””â”€â”€ factory.py
â”‚       â”‚
â”‚       â””â”€â”€ config/                  # é…ç½®
â”‚
â”œâ”€â”€ frontend/                        # React å‰ç«¯
â”‚   â””â”€â”€ src/
â”‚       â”œâ”€â”€ App.tsx                  # ä¸»åº”ç”¨
â”‚       â”œâ”€â”€ components/              # UI ç»„ä»¶
â”‚       â”‚   â”œâ”€â”€ Header.tsx
â”‚       â”‚   â”œâ”€â”€ GradeSelector.tsx    # å¹´çº§é€‰æ‹©
â”‚       â”‚   â”œâ”€â”€ ProblemInput.tsx     # é—®é¢˜è¾“å…¥
â”‚       â”‚   â”œâ”€â”€ ResultDisplay.tsx    # ç»“æœå±•ç¤º
â”‚       â”‚   â””â”€â”€ LoadingAnimation.tsx
â”‚       â””â”€â”€ services/
â”‚           â””â”€â”€ api.ts               # API å®¢æˆ·ç«¯
â”‚
â”œâ”€â”€ .env                             # ç¯å¢ƒå˜é‡
â””â”€â”€ docker-compose.yml               # Docker é…ç½®
```

---

## ğŸ”„ LangGraph å·¥ä½œæµè¯¦è§£

### èŠ‚ç‚¹è¯´æ˜

| èŠ‚ç‚¹ | æ–‡ä»¶ | åŠŸèƒ½ |
|------|------|------|
| **classifier** | `classifier.py` | åˆ¤æ–­é¢˜ç›®ç±»å‹ï¼ˆsimple/complexï¼‰å’Œéš¾åº¦ |
| **understanding** | `understanding.py` | æ·±åº¦ç†è§£å¤æ‚é¢˜ç›® |
| **solving** | `solving.py` | è§£é¢˜ï¼ŒåŒ¹é…æŠ€èƒ½æ¨¡æ¿ |
| **validator** | `validator.py` | éªŒè¯è§£ç­”æ­£ç¡®æ€§ |
| **visualize** | `visualize.py` | ç”Ÿæˆ Manim ä»£ç ï¼ˆæ ¸å¿ƒï¼‰|
| **execute** | `execute.py` | æ‰§è¡Œ Manim ç”Ÿæˆè§†é¢‘ |
| **debug** | `debug.py` | ä¿®å¤ä»£ç é”™è¯¯ |
| **fallback** | `fallback.py` | é™çº§ä¸ºçº¯æ–‡æœ¬ |

### Visualize èŠ‚ç‚¹æ ¸å¿ƒé€»è¾‘

```python
# æ¨¡æ¿ä¼˜å…ˆç­–ç•¥
if skill.code_template and valid:
    return template_code  # ç›´æ¥ä½¿ç”¨æ¨¡æ¿ï¼Œä¸è°ƒç”¨ LLM
else:
    return await llm_generate(...)  # é™çº§åˆ° LLM ç”Ÿæˆ
```

---

## ğŸ“š æŠ€èƒ½ç³»ç»Ÿ (24ä¸ªæ¨¡æ¿)

### å°å­¦
- `addition.md` - åŠ æ³•
- `subtraction.md` - å‡æ³•  
- `multiplication.md` - ä¹˜æ³•
- `division.md` - é™¤æ³•
- `chicken_rabbit.md` - é¸¡å…”åŒç¬¼

### åˆä¸­
- `equation_basics.md` - ä¸€å…ƒä¸€æ¬¡æ–¹ç¨‹
- `geometry.md` - å‡ ä½•

### é«˜ä¸­
- `quadratic_function.md` - ä¾‹å­ï¼ŒäºŒæ¬¡å‡½æ•°æœ€å€¼

### å¤§å­¦
- `limit_sinx_x.md` - ä¾‹å­ï¼Œæé™ï¼ˆå‡ ä½•å¤¹é€¼è¯æ˜ï¼‰ï¼Œå®ç°çš„è¿˜ä¸æ˜¯å¾ˆå¥½

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Python 3.12+
- Node.js 18+
- OpenAI API Key

### 1. é…ç½®ç¯å¢ƒå˜é‡
```bash
cp .env.example .env
# ç¼–è¾‘ .envï¼Œå¡«å…¥ OPENAI_API_KEY
```

### 2. å¯åŠ¨åç«¯
```bash
cd backend
pip install -e .
uvicorn math_tutor.api.main:app --reload
```

### 3. å¯åŠ¨å‰ç«¯
```bash
cd frontend
npm install
npm run dev
```

### 4. è®¿é—®
- å‰ç«¯ï¼šhttp://localhost:5173
- API æ–‡æ¡£ï¼šhttp://localhost:8000/api/docs

---

## ğŸ“ API æ¥å£

### POST /api/v1/problems
å¤„ç†æ•°å­¦é—®é¢˜ï¼Œè¿”å›è§£é¢˜æ­¥éª¤å’Œè§†é¢‘

**è¯·æ±‚ï¼š**
```json
{
  "problem": "è®¡ç®— 25 + 37",
  "grade": "elementary_lower"
}
```

**å“åº”ï¼š**
```json
{
  "status": "success",
  "steps": [...],
  "answer": "62",
  "video_path": "/media/videos/.../SolutionScene.mp4"
}
```

### GET /api/v1/grades
è·å–æ”¯æŒçš„å¹´çº§åˆ—è¡¨

### GET /api/v1/skills
è·å–å¯ç”¨çš„æŠ€èƒ½åˆ—è¡¨

---

## ğŸ”§ é…ç½®è¯´æ˜

| ç¯å¢ƒå˜é‡ | è¯´æ˜ | é»˜è®¤å€¼ |
|----------|------|--------|
| `OPENAI_API_KEY` | OpenAI API å¯†é’¥ | å¿…å¡« |
| `OPENAI_BASE_URL` | API åŸºç¡€ URL | https://api.openai.com/v1 |
| `LLM_MODEL` | ä½¿ç”¨çš„æ¨¡å‹ | gpt-4o |
| `MANIM_QUALITY` | è§†é¢‘è´¨é‡ (low/medium/high) | low |
| `MANIM_OUTPUT_DIR` | è§†é¢‘è¾“å‡ºç›®å½• | media |

---

## ğŸ¯ è®¾è®¡åŸåˆ™

### 1. å›¾å½¢ä¼˜å…ˆ
> æ‰€æœ‰è§£é¢˜åœ¨å›¾å½¢ä¸Šå®Œæˆï¼Œæ–‡å­—åªæ˜¯è¾…åŠ©

### 2. æ¨¡æ¿ä¼˜å…ˆ
> åŒ¹é…åˆ°æŠ€èƒ½åç›´æ¥ä½¿ç”¨é¢„å®šä¹‰æ¨¡æ¿ä»£ç 

### 3. è‡ªåŠ¨ä¿®å¤
> ä»£ç é”™è¯¯è‡ªåŠ¨è¿›å…¥ debug èŠ‚ç‚¹ä¿®å¤

### 4. åˆ†å¹´çº§æ€ç»´
> ä¸åŒå¹´çº§ä½¿ç”¨ä¸åŒçš„è§£é¢˜é£æ ¼å’Œå¯è§†åŒ–æ–¹å¼

---

## ğŸ“„ License

MIT License

---

## ğŸ™ è‡´è°¢

- [Manim Community](https://www.manim.community/) - æ•°å­¦åŠ¨ç”»å¼•æ“
- [LangGraph](https://github.com/langchain-ai/langgraph) - Agent å·¥ä½œæµ
- [Anthropic Skills](https://github.com/anthropics/skills) - æŠ€èƒ½ç³»ç»Ÿå‚è€ƒ
